function calendarTimer(e){this.objname=e,this.timers=new Array}function toggleCalendar(e,t,n){var a=document.getElementById("div_"+e);null!=a&&("hidden"==a.style.visibility?(a.style.visibility="visible",document.getElementById(e+"_frame").contentWindow.adjustContainer(),t&&(n<3e3&&(n=3e3),prepareHide(e,n))):a.style.visibility="hidden")}function showCalendar(e){var t=document.getElementById("div_"+e);null!=t&&(t.style.visibility="visible",document.getElementById(e+"_frame").contentWindow.adjustContainer())}function hideCalendar(e){var t=document.getElementById("div_"+e);null!=t&&(t.style.visibility="hidden")}function prepareHide(e,t){cancelHide(e);var n=setTimeout(function(){hideCalendar(e)},t),a=!1;for(i=0;i<this.hideCalendarTimer.length;i++)this.hideCalendarTimer[i].objname==e&&(a=!0,this.hideCalendarTimer[i].timers[this.hideCalendarTimer[i].timers.length]=n);if(!a){var r=new calendarTimer(e);r.timers[r.timers.length]=n,this.hideCalendarTimer[this.hideCalendarTimer.length]=r}}function cancelHide(e){for(i=0;i<this.hideCalendarTimer.length;i++)if(this.hideCalendarTimer[i].objname==e){var t=this.hideCalendarTimer[i].timers;for(n=0;n<t.length;n++)clearTimeout(t[n]);this.hideCalendarTimer[i].timers=new Array;break}}function setValue(e,t){var n=document.getElementById(e).value!=t;updateValue(e,t),document.getElementById(e+"_dp").value&&toggleCalendar(e),checkPairValue(e,t),""!=document.getElementById(e+"_och").value&&n&&calendar_onchange(e);var a=document.getElementById(e).value.split("-");tc_submitDate(e,a[2],a[1],a[0])}function updateValue(e,t){if(document.getElementById(e).value=t,1==document.getElementById(e+"_dp").value){var n=t.split("-");if(1==document.getElementById(e+"_inp").value)document.getElementById(e+"_day").value=padString(n[2].toString(),2,"0"),document.getElementById(e+"_month").value=padString(n[1].toString(),2,"0"),document.getElementById(e+"_year").value=padString(n[0].toString(),4,"0"),tc_updateDay(e,n[0],n[1],n[2]);else{if(n[0]>0&&n[1]>0&&n[2]>0){var a=new Date;a.setFullYear(n[0],n[1]-1,n[2]);var r=document.getElementById(e+"_fmt").value,l=a.format(r)}else l=l_sel_date;document.getElementById("divCalendar_"+e+"_lbl").innerHTML=l}}}function tc_submitDate(e,t,n,a){var r=document.getElementById(e+"_frame"),l=document.getElementById(e+"_year_start").value,u=document.getElementById(e+"_year_end").value,d=document.getElementById(e+"_dp").value,i=document.getElementById(e+"_da1").value,o=document.getElementById(e+"_da2").value,s=document.getElementById(e+"_sna").value,c=document.getElementById(e+"_aut").value,m=document.getElementById(e+"_frm").value,_=document.getElementById(e+"_tar").value,g=document.getElementById(e+"_inp").value,h=document.getElementById(e+"_fmt").value,y=document.getElementById(e+"_dis").value,v=document.getElementById(e+"_pr1").value,f=document.getElementById(e+"_pr2").value,p=document.getElementById(e+"_prv").value,I=document.getElementById(e+"_pth").value,E=document.getElementById(e+"_spd").value,B=document.getElementById(e+"_spt").value,b=document.getElementById(e+"_och").value,D=document.getElementById(e+"_str").value,w=document.getElementById(e+"_rtl").value,S=document.getElementById(e+"_wks").value,C=document.getElementById(e+"_int").value,M=document.getElementById(e+"_hid").value,T=document.getElementById(e+"_hdt").value,j=document.getElementById(e+"_hl").value;r.src=I+"calendar_form.php?objname="+e.toString()+"&selected_day="+t+"&selected_month="+n+"&selected_year="+a+"&year_start="+l+"&year_end="+u+"&dp="+d+"&da1="+i+"&da2="+o+"&sna="+s+"&aut="+c+"&frm="+m+"&tar="+_+"&inp="+g+"&fmt="+h+"&dis="+y+"&pr1="+v+"&pr2="+f+"&prv="+p+"&spd="+E+"&spt="+B+"&och="+b+"&str="+D+"&rtl="+w+"&wks="+S+"&int="+C+"&hid="+M+"&hdt="+T+"&hl="+j,r.contentWindow.submitNow(t,n,a)}function tc_setDMY(e,t,n,a){document.getElementById(e).value=a+"-"+n+"-"+t,tc_submitDate(e,t,n,a)}function tc_setDay(e,t){var n=document.getElementById(e),a=n.value.split("-");isDateAllow(e,t,a[1],a[0])&&checkSpecifyDate(e,t,a[1],a[0])?isDate(t,a[1],a[0])?tc_setDMY(e,t,a[1],a[0]):document.getElementById(e+"_day").selectedIndex=a[2]:restoreDate(e),checkPairValue(e,n.value);var r=document.getElementById(e).value!=d;""!=document.getElementById(e+"_och").value&&r&&calendar_onchange(e)}function tc_setMonth(e,t){var n=document.getElementById(e),a=n.value.split("-");isDateAllow(e,a[2],t,a[0])&&checkSpecifyDate(e,a[2],t,a[0])?(document.getElementById(e+"_dp").value&&document.getElementById(e+"_inp").value&&(a[2]=tc_updateDay(e,a[0],t,a[2])),isDate(a[2],t,a[0])?tc_setDMY(e,a[2],t,a[0]):document.getElementById(e+"_month").selectedIndex=a[1]):(alert(l_not_allowed),restoreDate(e)),checkPairValue(e,n.value);var r=document.getElementById(e).value!=d;""!=document.getElementById(e+"_och").value&&r&&calendar_onchange(e)}function tc_setYear(e,t){var n=document.getElementById(e),a=n.value.split("-");isDateAllow(e,a[2],a[1],t)&&checkSpecifyDate(e,a[2],a[1],t)?(document.getElementById(e+"_dp").value&&document.getElementById(e+"_inp").value&&(a[2]=tc_updateDay(e,t,a[1],a[2])),isDate(a[2],a[1],t)?tc_setDMY(e,a[2],a[1],t):document.getElementById(e+"_year").value=a[0]):restoreDate(e),checkPairValue(e,n.value);var r=document.getElementById(e).value!=d;""!=document.getElementById(e+"_och").value&&r&&calendar_onchange(e)}function yearEnter(e){return 13==(e&&e.which?(e=e).which:(e=event).keyCode)}function isInteger(e){var t;for(t=0;t<e.length;t++){var n=e.charAt(t);if(n<"0"||n>"9")return!1}return!0}function stripCharsInBag(e,t){var n,a="";for(n=0;n<e.length;n++){var r=e.charAt(n);-1==t.indexOf(r)&&(a+=r)}return a}function is_leapYear(e){return e%4==0&&!(e%100==0&&e%400!=0)}function daysInMonth(e,t){var n=new Array(31,28,31,30,31,30,31,31,30,31,30,31);return 2==e&&t>0&&is_leapYear(t)?29:n[e-1]}function isDate(e,t,n){return!0}function isDateAllow(e,t,n,a){var r=parseInt(document.getElementById(e+"_da1").value),l=parseInt(document.getElementById(e+"_da2").value),u=!isNaN(r),d=!isNaN(l);if(t=parseInt(parseFloat(t)),n=parseInt(parseFloat(n)),a=parseInt(parseFloat(a)),t>0&&n>0&&a>0&&(u||d)){var i=new Date(a,n-1,t);if(da2Set=i.getTime()/1e3,(!u||da2Set>=r)&&(!d||da2Set<=l))return!0;var o=document.getElementById(e+"_fmt").value;return u&&(i.setTime(1e3*r),da1Str=i.format(o)),d&&(i.setTime(1e3*l),da2Str=i.format(o)),u?d?alert(sprintf(l_date_between,da1Str,da2Str)):alert(sprintf(l_date_after,da1Str)):alert(sprintf(l_date_before,da2Str)),!1}return!0}function restoreDate(e){var t=document.getElementById(e).value.split("-",3);document.getElementById(e+"_day").value=t[2],document.getElementById(e+"_month").value=t[1],document.getElementById(e+"_year").value=t[0]}function padString(e,t,n){if(e.length<t)for(;e.length<t;)e=n+e;return e}function tc_updateDay(e,t,n,a){var r=n>0&&t>0?daysInMonth(n,t):n>0?daysInMonth(n,2008):31,l=document.getElementById(e+"_day");for(0==l.options[0].value||""==l.options[0].value?l.length=1:l.length=0,d=1;d<=r;d++){var u=document.createElement("OPTION");u.text=d,u.value=d,"1"==l_use_ymd_drop&&(u.text+=l_day),l.options[d]=new Option(u.text,padString(u.value,2,"0"))}return l.value=a>r?padString(r,2,"0"):padString(a,2,"0"),l.value}function checkPairValue(e,t){var n=document.getElementById(e+"_pr1").value,a=document.getElementById(e+"_pr2").value,r=document.getElementById(e).value.split("-"),l=new Date(r[0],r[1]-1,r[2]).getTime()/1e3;if(""!=n&&null!=document.getElementById(n)){document.getElementById(n+"_prv").value=t;var u=document.getElementById(n).value.split("-");l<new Date(u[0],u[1]-1,u[2]).getTime()/1e3?(document.getElementById(e+"_prv").value="",tc_submitDate(n,"00","00","0000")):tc_submitDate(n,u[2],u[1],u[0])}if(""!=a&&null!=document.getElementById(a)){document.getElementById(a+"_prv").value=t;var d=document.getElementById(a).value.split("-");l>new Date(d[0],d[1]-1,d[2]).getTime()/1e3?(document.getElementById(e+"_prv").value="",tc_submitDate(a,"00","00","0000")):tc_submitDate(a,d[2],d[1],d[0])}}function checkSpecifyDate(e,t,n,a){var r=document.getElementById(e+"_spd").value,l=document.getElementById(e+"_spt").value;if("undefined"!=typeof JSON)u=JSON.parse(r);else if(""!=r&&r.length>2){var u=r.substring(2,r.length-2).split("],[");for(i=0;i<u.length;i++){var d=u[i];u[i]=""==d?new Array:d.split(",")}}else u=new Array;var o=!1;for(var s in u[2])if(u[2].hasOwnProperty(s)&&(this_date=new Date(1e3*u[2][s]),this_date.getDate()==parseInt(parseFloat(t))&&this_date.getMonth()+1==parseInt(parseFloat(n)))){o=!0;break}if(!o)for(var s in u[1])if(u[1].hasOwnProperty(s)&&(this_date=new Date(1e3*u[1][s]),this_date.getDate()==parseInt(parseFloat(t)))){o=!0;break}if(!o){var c=new Date(a,n-1,t).getTime()/1e3;for(var s in u[0])if(u[0].hasOwnProperty(s)&&c==u[0][s]){o=!0;break}}switch(l){case 0:default:if(o)return alert(l_not_allowed),!1;break;case 1:if(!o)return alert(l_not_allowed),!1}return!0}function urldecode(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}function calendar_onchange(objname){var fc=document.getElementById(objname+"_och").value;eval(urldecode(fc))}function focusCalendar(e){var t=document.getElementById("container_"+e);null!=t&&(t.style.zIndex=999)}function unFocusCalendar(e,t){var n=document.getElementById("container_"+e);null!=n&&(n.style.zIndex=t)}function setDateLabel(e){var t=document.getElementById("divCalendar_"+e+"_lbl");if(null!=t){var n=document.getElementById(e).value,a=l_sel_date;if("0000-00-00"!=n){var r=n.split("-"),l=new Date;l.setFullYear(r[0],r[1]-1,r[2]);var u=document.getElementById(e+"_fmt").value;a=l.format(u)}t.innerHTML=a}}function sprintf(){if(arguments&&!(arguments.length<1)&&RegExp){for(var e=arguments[0],t=/([^%]*)%('.|0|\x20)?(-)?(\d+)?(\.\d+)?(%|b|c|d|u|f|o|s|x|X)(.*)/,n=b=[],a=0,r=0;n=t.exec(e);){var l=n[1],u=n[2],d=n[3],i=n[4],o=n[5],s=n[6],c=n[7];if(r++,"%"==s)y="%";else{++a>=arguments.length&&alert("Error! Not enough function arguments ("+(arguments.length-1)+", excluding the string)\nfor the number of substitution parameters in string ("+a+" so far).");var m=arguments[a],_="";u&&"'"==u.substr(0,1)?_=l.substr(1,1):u&&(_=u);d&&"-"===d&&!1;var g=-1;i&&(g=parseInt(i));var h=-1;o&&"f"==s&&(h=parseInt(o.substring(1)));var y=m;switch(s){case"b":y=parseInt(m).toString(2);break;case"c":y=String.fromCharCode(parseInt(m));break;case"d":y=parseInt(m)?parseInt(m):0;break;case"u":y=Math.abs(m);break;case"f":y=h>-1?Math.round(parseFloat(m)*Math.pow(10,h))/Math.pow(10,h):parseFloat(m);break;case"o":y=parseInt(m).toString(8);break;case"s":y=m;break;case"x":y=(""+parseInt(m).toString(16)).toLowerCase();break;case"X":y=(""+parseInt(m).toString(16)).toUpperCase()}var v=g-y.toString().length;if(v>0)f=new Array(v+1).join(_||" ");else var f=""}e=l+f+y+c}return e}}var s_jan,s_feb,s_mar,s_apr,s_may,s_jun,s_jul,s_aug,s_sep,s_oct,s_nov,s_dec,l_january,l_february,l_march,l_april,l_may,l_june,l_july,l_august,l_september,l_october,l_november,l_december,l_januaryu,l_februaryu,l_marchu,l_aprilu,l_mayu,l_juneu,l_julyu,l_augustu,l_septemberu,l_octoberu,l_novemberu,l_decemberu,l_lang,s_sun,s_mon,s_tue,s_wed,s_thu,s_fri,s_sat,l_sunday,l_monday,l_tuesday,l_wednesday,l_thursday,l_friday,l_saturday,hideCalendarTimer=new Array,minYear=1900,maxYear=2100;Date.prototype.format=function(e){for(var t="",n=Date.replaceChars,a=0;a<e.length;a++){var r=e.charAt(a);n[r]?t+=n[r].call(this):t+=r}return t},Date.replaceChars={shortMonths:[s_jan,s_feb,s_mar,s_apr,s_may,s_jun,s_jul,s_aug,s_sep,s_oct,s_nov,s_dec],longMonths:"el_GR"!=l_lang?[l_january,l_february,l_march,l_april,l_may,l_june,l_july,l_august,l_september,l_october,l_november,l_december]:[l_januaryu,l_februaryu,l_marchu,l_aprilu,l_mayu,l_juneu,l_julyu,l_augustu,l_septemberu,l_octoberu,l_novemberu,l_decemberu],shortDays:[s_sun,s_mon,s_tue,s_wed,s_thu,s_fri,s_sat],longDays:[l_sunday,l_monday,l_tuesday,l_wednesday,l_thursday,l_friday,l_saturday],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return"Not Yet Supported"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return"Not Yet Supported"},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}};